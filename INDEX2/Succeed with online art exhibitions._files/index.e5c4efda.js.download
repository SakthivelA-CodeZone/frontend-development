!function(){var e,t,i,a,s,n;class r{constructor(e){this.element=e}}class o{addEventListener(e){this.handlers.push(e)}removeEventListener(e){this.handlers=this.handlers.filter(t=>t!==e)}invoke(e){this.handlers.slice(0).forEach(t=>t(e))}expose(){return this}constructor(){this.handlers=[]}}class l extends r{constructor(){super(document.createElement("div")),this.element.className="loading-component";let e=document.createElement("div");e.className="spinner-shadow",this.element.append(e);let t=document.createElement("div");t.className="spinner",this.element.append(t)}}(a=e||(e={}))[a.Template=0]="Template",a[a.Intro=1]="Intro",a[a.Analytics=2]="Analytics",a[a.ProjectListing=3]="ProjectListing";class c extends r{get ClickEvent(){return this.clickEvent.expose()}setLoading(e){e?this.element.append(this.loadingComponent.element):(this.loadingComponent.element.remove(),3==this.style&&this.image?(this.image.height=170,this.image.naturalWidth/this.image.naturalHeight>1.7647?(this.image.style.width="auto",this.image.style.height="170px"):(this.image.style.width="300px",this.image.style.height="auto"),this.discoverImageParent&&this.discoverImageParent.append(this.image)):this.image&&this.element.prepend(this.image))}setAnalyticsData(e,t,i){let a=document.createElement("div");a.className="card-analytics-parent",this.element.append(a);let s=document.createElement("div");s.textContent="Your art exhibitions have gained",s.style.fontSize="16px",s.style.marginBottom="10px",a.append(s);let n=document.createElement("div");n.className="card-analytics-div",a.append(n);let r=document.createElement("div");r.className="card-analytics-count",r.textContent=e.toString(),n.append(r);let o=document.createElement("div");o.className="card-analytics-text",o.textContent=" Visits",n.append(o);let l=document.createElement("div");l.className="card-analytics-div",a.append(l);let c=document.createElement("div");c.className="card-analytics-count",c.textContent=t.toString(),l.append(c);let d=document.createElement("div");d.className="card-analytics-text",d.textContent="Likes",l.append(d);let m=document.createElement("div");m.className="card-analytics-div",a.append(m);let h=document.createElement("div");h.className="card-analytics-count",h.textContent=i.toString(),m.append(h);let p=document.createElement("div");p.className="card-analytics-text",p.textContent="Clicks",m.append(p),this.image&&this.element.prepend(this.image),this.setLoading(!1)}setProjectData(e,t,i){let a=document.createElement("div");a.className="card-discover-content",this.element.append(a),this.element.onclick=()=>this.clickEvent.invoke(),this.discoverImageParent=document.createElement("div"),this.discoverImageParent.className="card-discover-img",this.element.append(this.discoverImageParent);let s=document.createElement("div");s.textContent=e,s.className="card-discover-title",a.append(s);let n=document.createElement("div");n.textContent=t,n.className="card-discover-description",a.append(n);let r=document.createElement("div"),o=i.getDate()+"."+(i.getMonth()+1)+"."+i.getFullYear();r.textContent=o,r.className="card-discover-date",a.append(r)}setError(e){let t=document.createElement("div");t.textContent=e,this.element.append(t),this.setLoading(!1)}select(){this.element.style.borderColor="var(--pink)",this.element.style.borderWidth="4px"}unselect(){this.element.style.borderColor="",this.element.style.borderWidth="2px"}constructor(e,t){super(document.createElement("div")),this.clickEvent=new o,this.style=e,3!=e&&(this.element.onclick=()=>this.clickEvent.invoke()),1==e?this.element.className="card-intro":0==e?this.element.className="card-template":2==e?this.element.className="card-analytics":3==e&&(this.element.className="card-discover"),this.loadingComponent=new l,this.loadingComponent.element.style.top="25%",this.setLoading(!0),t&&(this.image=document.createElement("img"),this.image.width=300,this.image.height=0==e?120:180,this.image.src=t,2!=e&&(this.image.onload=()=>this.setLoading(!1)))}}class d{fetchProjectListings(){this.main.getDiscoveryList({currentPage:0,pageSize:25}).then(e=>{this.publishedProjectsResult=e,this.setData()}).catch(e=>{console.error(e),this.setData()})}setData(){this.setLoading(!1),this.createProjectCards(this.publishedProjectsResult)}setLoading(e){e?document.body.append(this.loadingComponent.element):this.loadingComponent.element.remove()}createProjectCards(t){if(t){let i=t.projects;for(let t=0;t<i.length;t++){let a=i[t].MetaImageUrl||i[t].ThumbUrl,s=new Date(i[t].UpdatedAt),n=new c(e.ProjectListing,a),r=this.main.VIEWER_URL+"/";if(r+=i[t].Slug?i[t].Slug:i[t].Id,n.ClickEvent.addEventListener(()=>this.cardClicked(r)),n.setProjectData(i[t].MetaTitle,i[t].MetaDesc,s),this.flexElement.append(n.element),this.cards.push(n),this.cards.length>=5)break}}}constructor(e){this.cards=[],this.cardClicked=e=>{window.open(e,"_blank")},this.scroll=e=>{let t=Math.round(window.scrollX),i=t+(e?-340:340);if(0!=i%340){let a=t/340;i=(e?Math.floor(a):Math.ceil(a))*340}i>=0&&i<=this.flexElement.scrollWidth-340&&window.scrollTo({left:i,behavior:"smooth"})},this.main=e,this.flexElement=document.createElement("div"),this.flexElement.className="discover-page",document.body.append(this.flexElement),this.loadingComponent=new l,this.loadingCard=document.createElement("div"),this.loadingCard.className="loading-card";let t=document.createElement("div");t.className="loading-card-parent",this.loadingCard.append(t);let i=document.createElement("div");i.className="spinner-shadow",t.append(i);let a=document.createElement("div");a.className="spinner",t.append(a),this.leftButton=document.createElement("button"),this.leftButton.className="hotspot-prev",this.leftButton.onclick=()=>this.scroll(!0),document.body.append(this.leftButton),this.rightButton=document.createElement("button"),this.rightButton.className="hotspot-next",this.rightButton.onclick=()=>this.scroll(!1),document.body.append(this.rightButton);let s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("viewBox","0 0 30 30");let n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d","M17.3,22.4l-6.4-6.4c-0.6-0.6-0.6-1.5,0-2.1l0,0c0.6-0.6,1.5-0.6,2.1,0l6.4,6.4c0.6,0.6,0.6,1.5,0,2.1l0,0C18.8,23,17.9,23,17.3,22.4z");let r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d","M19.4,9.7l-6.4,6.4c-0.6,0.6-1.5,0.6-2.1,0l0,0c-0.6-0.6-0.6-1.5,0-2.1l6.4-6.4c0.6-0.6,1.5-0.6,2.1,0l0,0C20,8.2,20,9.1,19.4,9.7z"),s.append(n),s.append(r),this.leftButton.append(s);let o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("viewBox","0 0 30 30");let c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("d","M12.7,22.4l6.4-6.4c0.6-0.6,0.6-1.5,0-2.1l0,0c-0.6-0.6-1.5-0.6-2.1,0l-6.4,6.4c-0.6,0.6-0.6,1.5,0,2.1l0,0C11.2,23,12.1,23,12.7,22.4z");let d=document.createElementNS("http://www.w3.org/2000/svg","path");d.setAttribute("d","M10.6,9.7l6.4,6.4c0.6,0.6,1.5,0.6,2.1,0l0,0c0.6-0.6,0.6-1.5,0-2.1l-6.4-6.4c-0.6-0.6-1.5-0.6-2.1,0l0,0C10,8.2,10,9.1,10.6,9.7z"),o.append(c),o.append(d),this.rightButton.append(o),this.fetchProjectListings(),this.setLoading(!0)}}(s=t||(t={})).time="time",s.visitors="visitors",s.featured="featured",(n=i||(i={}))[n.None=0]="None",n[n.Gyro=1]="Gyro",n[n.USDZ=2]="USDZ",n[n.WebXR=3]="WebXR";class m{static isMobile(){var e;let t=!1;return e=navigator.userAgent||navigator.vendor,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}static isMobileOrPad(){return this.isMobile()||this.isIPadOS()}static isIPadOS(){return/Macintosh/.test(navigator.userAgent)&&"ontouchend"in document}static isIOS(){return!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)||this.isIPadOS()}static getHiddenProperty(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden" in document)return e[t]+"Hidden";return null}static getURLParameter(e){return decodeURIComponent((RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[null,""])[1].replace(/\+/g,"%20"))||null}static isPageHidden(){var e=this.getHiddenProperty();return!!e&&document[e]}static shuffleArray(e){for(let t=e.length-1;t>0;t--){let i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}}static async checkARSupport(){let e=!1;if("xr"in navigator){let t=navigator;await t.xr.isSessionSupported("immersive-ar").then(t=>{e=t}).catch(t=>{console.error(t),e=!1})}return e?3:document.createElement("a").relList.supports("ar")?2:0}}window.main=new class{checkOrder(){switch(m.getURLParameter("sort")){case"trending":default:this.order=t.visitors;break;case"new":this.order=t.time;break;case"featured":this.order=t.featured}}versionCheck(){if(m.getURLParameter("v")!=this.version){let e=m.getURLParameter("sort");e||(e="trending");let t=location.origin+location.pathname+"?v="+this.version+"&sort="+e;location.href=t}}async getDiscoveryList(e){if(this.order==t.featured)return this.getFeaturedList();{let t="?order="+this.order+"&currentPage="+e.currentPage.toString()+"&pageSize="+e.pageSize.toString(),i=await fetch(`${this.API_URL}/gallery/published-projects/${t}`,{method:"GET",mode:"cors",credentials:"omit"});if(!i.ok)throw Error(i.statusText);return await i.json()}}async getFeaturedList(){let e=m.getURLParameter("slugs"),t=await fetch(`${this.API_URL}/gallery/featured-projects/?slugs=${e}`,{method:"GET",mode:"cors",credentials:"omit"});if(!t.ok)throw Error(t.statusText);let i=await t.json(),a=e.split(","),s=[];return a.forEach(e=>{let t=i.projects.find(t=>t.Slug==e);t&&s.push(t)}),i.projects=s,i}constructor(){this.PRODUCTION=!0,this.DEV_API_URL="https://gallery-staging.arilyn.fi",this.DEV_VIEWER_URL="https://visit.gallery-staging.arilyn.app",this.PROD_API_URL="https://gallery.arilyn.fi",this.PROD_VIEWER_URL="https://visit.virtualartgallery.com",this.API_URL=this.PRODUCTION?this.PROD_API_URL:this.DEV_API_URL,this.VIEWER_URL=this.PRODUCTION?this.PROD_VIEWER_URL:this.DEV_VIEWER_URL,this.order=t.visitors,this.version="2",this.versionCheck(),this.checkOrder(),this.discoverPage=new d(this)}}}();